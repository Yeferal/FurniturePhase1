"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[563],{8542:(m,h,n)=>{n.d(h,{m:()=>o});var g=n(7716),d=n(1841);let o=(()=>{class u{constructor(c){this.http=c,this.url="https://jsonplaceholder.typicode.com/users"}isAuthenticatedAdmin(){return this.http.post("http://localhost:8080/user/isAdminLoggedIn",{withCredentials:!0})}isAuthenticatedSales(){return this.http.post("http://localhost:8080/user/isSalesmanLoggedIn",{withCredentials:!0})}isAuthenticatedFabricate(){return this.http.post("http://localhost:8080/user/isFabricatemanLoggedIn",{withCredentials:!0})}isAuthenticatedIsLogged(){return this.http.post("http://localhost:8080/user/isLoggedIn",{withCredentials:!0})}postlogin(c){return this.http.post("http://localhost:8080/user/login",c,{withCredentials:!0})}}return u.\u0275fac=function(c){return new(c||u)(g.LFG(d.eN))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8563:(m,h,n)=>{n.r(h),n.d(h,{SessionModule:()=>F});var g=n(8583),d=n(4330),o=n(7716),u=n(8542),p=n(2160);let c=(()=>{class e{constructor(t,r,i){this.auth=t,this.router=r,this.cookieService=i}canActivate(){return this.auth.isAuthenticatedIsLogged().subscribe(t=>(console.log(t),!t||(this.router.navigate(["home"]),!1)),t=>(console.log(t),!0)),!0}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(u.m),o.LFG(d.F0),o.LFG(p.N))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=n(665);function v(e,a){if(1&e&&(o.TgZ(0,"label",16),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Oqu(t.messageError)}}const f=[{path:"login",component:(()=>{class e{constructor(t,r,i){this.cookieService=t,this.sessionService=r,this.router=i,this.loginForm=new s.cw({user:new s.NI(null,s.kI.required),password:new s.NI(null,s.kI.required)}),this.messageError="",this.isError=!1}ngOnInit(){}login(){var t,r;if(this.loginForm.invalid)return this.messageError="Debe llenar todos los campos",void(this.isError=!0);let i=new FormData;i.append("user",null===(t=this.loginForm.get("user"))||void 0===t?void 0:t.value),i.append("password",null===(r=this.loginForm.get("password"))||void 0===r?void 0:r.value),this.isError=!0,this.sessionService.postlogin(i).subscribe(l=>{console.log(l),l.token?(this.createCookie("tokenfurniture",l.token),this.router.navigate(["home"])):this.messageError=l.msj},l=>{console.log(l)})}createCookie(t,r){this.cookieService.set(t,r),this.cookieService.get(t),console.log(this.cookieService.get(t))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.N),o.Y36(u.m),o.Y36(d.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:19,vars:6,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-6","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-12"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],["style","color: red;",4,"ngIf"],[1,"user",3,"formGroup"],[1,"form-group"],["type","text","formControlName","user","id","exampleInputUser","placeholder","Ingrese su Usuario...",1,"form-control","form-control-user"],["type","password","formControlName","password","id","exampleInputPassword","placeholder","Contrase\xf1a",1,"form-control","form-control-user"],[1,"btn","btn-primary","btn-user","btn-block",3,"click"],[2,"color","red"]],template:function(t,r){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"div",7),o.TgZ(8,"div",8),o.TgZ(9,"h1",9),o._uU(10,"Inicio de Session!"),o.qZA(),o.YNc(11,v,2,1,"label",10),o.qZA(),o.TgZ(12,"form",11),o.TgZ(13,"div",12),o._UZ(14,"input",13),o.qZA(),o.TgZ(15,"div",12),o._UZ(16,"input",14),o.qZA(),o.TgZ(17,"a",15),o.NdJ("click",function(){return r.login()}),o._uU(18," Login "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){let i,l;o.xp6(11),o.Q6J("ngIf",r.isError),o.xp6(1),o.Q6J("formGroup",r.loginForm),o.xp6(2),o.ekj("inp-invalid",(null==(i=r.loginForm.get("user"))?null:i.errors)&&(null==(i=r.loginForm.get("user"))?null:i.touched)),o.xp6(2),o.ekj("inp-invalid",(null==(l=r.loginForm.get("password"))?null:l.errors)&&(null==(l=r.loginForm.get("password"))?null:l.touched))}},directives:[g.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[""]}),e})(),canActivate:[c]}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[d.Bz.forChild(f)],d.Bz]}),e})();var A=n(4466);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.ez,Z,s.u5,s.UX,A.m]]}),e})()}}]);