"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[563],{8542:(m,g,n)=>{n.d(g,{m:()=>e});var p=n(7716),d=n(1841);let e=(()=>{class l{constructor(c){this.http=c,this.url="https://jsonplaceholder.typicode.com/users"}isAuthenticatedAdmin(){return this.http.post("http://localhost:8080/user/isAdminLoggedIn",{withCredentials:!0})}isAuthenticatedSales(){return this.http.post("http://localhost:8080/user/isSalesmanLoggedIn",{withCredentials:!0})}isAuthenticatedFabricate(){return this.http.post("http://localhost:8080/user/isFabricatemanLoggedIn",{withCredentials:!0})}isAuthenticatedIsLogged(){return this.http.post("http://localhost:8080/user/isLoggedIn",{withCredentials:!0})}postlogin(c){return this.http.post("http://localhost:8080/user/login",c,{withCredentials:!0})}}return l.\u0275fac=function(c){return new(c||l)(p.LFG(d.eN))},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},8563:(m,g,n)=>{n.r(g),n.d(g,{SessionModule:()=>F});var p=n(8583),d=n(4330),e=n(7716),l=n(8542),h=n(2160);let c=(()=>{class o{constructor(t,r,i){this.auth=t,this.router=r,this.cookieService=i}canActivate(){return this.auth.isAuthenticatedIsLogged().subscribe(t=>(console.log(t),!t||(this.router.navigate(["home"]),!1)),t=>(console.log(t),!0)),!0}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(l.m),e.LFG(d.F0),e.LFG(h.N))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var s=n(665);function v(o,a){if(1&o&&(e.TgZ(0,"label",16),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.messageError)}}const f=[{path:"login",component:(()=>{class o{constructor(t,r,i){this.cookieService=t,this.sessionService=r,this.router=i,this.loginForm=new s.cw({user:new s.NI(null,s.kI.required),password:new s.NI(null,s.kI.required)}),this.messageError="",this.isError=!1}ngOnInit(){}login(){var t,r;if(this.loginForm.invalid)return this.messageError="Debe llenar todos los campos",void(this.isError=!0);let i=new FormData;i.append("user",null===(t=this.loginForm.get("user"))||void 0===t?void 0:t.value),i.append("password",null===(r=this.loginForm.get("password"))||void 0===r?void 0:r.value),this.isError=!0,this.sessionService.postlogin(i).subscribe(u=>{console.log(u),u.token?(this.createCookie("tokenfurniture",u.token),this.router.navigate(["home"])):this.messageError=u.msj},u=>{console.log(u)})}createCookie(t,r){this.cookieService.set(t,r),this.cookieService.get(t),console.log(this.cookieService.get(t))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.N),e.Y36(l.m),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:19,vars:6,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-6","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-12"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],["style","color: red;",4,"ngIf"],[1,"user",3,"formGroup"],[1,"form-group"],["type","text","formControlName","user","id","exampleInputUser","placeholder","Ingrese su Usuario...",1,"form-control","form-control-user"],["type","password","formControlName","password","id","exampleInputPassword","placeholder","Contrase\xf1a",1,"form-control","form-control-user"],[1,"btn","btn-primary","btn-user","btn-block",3,"click"],[2,"color","red"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"h1",9),e._uU(10,"Inicio de Session!"),e.qZA(),e.YNc(11,v,2,1,"label",10),e.qZA(),e.TgZ(12,"form",11),e.TgZ(13,"div",12),e._UZ(14,"input",13),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"input",14),e.qZA(),e.TgZ(17,"a",15),e.NdJ("click",function(){return r.login()}),e._uU(18," Login "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let i,u;e.xp6(11),e.Q6J("ngIf",r.isError),e.xp6(1),e.Q6J("formGroup",r.loginForm),e.xp6(2),e.ekj("inp-invalid",(null==(i=r.loginForm.get("user"))?null:i.errors)&&(null==(i=r.loginForm.get("user"))?null:i.touched)),e.xp6(2),e.ekj("inp-invalid",(null==(u=r.loginForm.get("password"))?null:u.errors)&&(null==(u=r.loginForm.get("password"))?null:u.touched))}},directives:[p.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[""]}),o})(),canActivate:[c]}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(f)],d.Bz]}),o})();var A=n(4466);let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,Z,s.u5,s.UX,A.m]]}),o})()}}]);